class jtag_environment extends uvm_env;
   `uvm_component_utils(jtag_environment);

   jtag_env_config jtag_env_cfg;
   jtag_agent jtag_agnt;
   fuse_env_config fuse_env_cfg;
   fuse_agent fuse_agnt;
   Scoreboard scb;

   function new(string name, uvm_component parent);
      super.new(name,parent);
   endfunction // new

   function void build_phase(uvm_phase phase);
		super.build_phase(phase);
      
			//--------check if env_cfg exist in uvm_config_db ------//
		if(!uvm_config_db#(env_config) :: get
			(this,"","env_cfg",env_cfg))
		begin //---- send error -----//
			`uvm_error("ECNF","Environment config not found");
		end
		
      
		if(jtag_env_cfg.has_agent)
		begin
			//-------   GET JTAG AGENT CONFIG   --------//
			uvm_config_db#(jtag_agent_config):: set
				(this,"jtag_agnt*","jtag_agent_cfg",jtag_env_cfg.jtag_agent_cfg);
			jtag_agnt=jtag_agent::type_id::create("jtag_agnt",this);
		end
		
		if(jtag_env_cfg.has_scoreboard)
		begin 
			$display("building scoreboard ___________ ");
			scb=Scoreboard::type_id::create("scb",this);
		end
		
		if(fuse_env_cfg.has_agent)
		begin
			//-------   GET FUSE AGENT CONFIG   --------//
			uvm_config_db#(fuse_agent_config):: set
				(this,"fuse_agnt*","fuse_agent_cfg",fuse_env_cfg.fuse_agent_cfg);
			fuse_agnt=fuse_agent::type_id::create("fuse_agnt",this);
		end
		
		if(fuse_env_cfg.has_scoreboard)
		begin 
			$display("building scoreboard ___________ ");
			scb=Scoreboard::type_id::create("scb",this);
		end
   endfunction // build_phase 
   endfunction // build_phase 
   
   
   function void connect_phase(uvm_phase phase);
      super.connect_phase(phase);
      //agent.aportAgnt.connect(scb.fifo.analysis_export);
      
   endfunction // connect_phase

endclass // Environment
